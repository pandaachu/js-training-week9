{"version":3,"sources":["all.js"],"names":["web","api_path","token","productList","productWrap","document","querySelector","cartList","cartListWrap","totalPrice","productId","cartId","getProductId","addCardBtns","querySelectorAll","forEach","item","addEventListener","e","preventDefault","target","getAttribute","addToCart","getProductList","axios","get","then","res","data","products","console","log","productListRender","str","images","id","title","dollarSign","origin_price","price","innerHTML","getCartList","carts","cartListRender","textContent","finalTotal","delCartListData","product","quantity","insertAfter","el","htmlString","insertAdjacentHTML","cartData","post","btnDelete","money"],"mappings":"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","file":"all.js","sourcesContent":["const web = \"https://hexschoollivejs.herokuapp.com\";\nconst api_path = \"pandaa\";\nconst token = \"0wqEojiDq0e1LPUqwrhkeg0wcX43\";\nlet productList = [];\nconst productWrap = document.querySelector('.productWrap');\nlet cartList = [];\nconst cartListWrap = document.querySelector('.js-cartList');\nconst totalPrice = document.querySelector('.js-totalPrice');\nconst productId = '';\nlet cartId = '';\n\nfunction getProductId() {\n  const addCardBtns = document.querySelectorAll('#addCardBtn');\n  addCardBtns.forEach(function(item) {\n    item.addEventListener('click', function(e){\n      e.preventDefault();\n      productId = e.target.getAttribute(\"data-id\");\n      addToCart();\n    })\n  })\n}\n\n// 取得產品清單\nfunction getProductList() {\n  axios.get(`${web}/api/livejs/v1/customer/${api_path}/products`)\n    .then(function(res) {\n      productList = res.data.products;\n      console.log('產品清單',productList);\n      productListRender();\n      getProductId();\n    })\n}\n\n// 產品清單 render\nfunction productListRender() {\n  let str = '';\n  productList.forEach(function(item) {\n    str += `<li class=\"productCard\">\n    <h4 class=\"productType\">新品</h4>\n    <img\n      src=\"${ item.images }\"\n      alt=\"\"\n    />\n    <a href=\"#\" id=\"addCardBtn\" data-id=\"${item.id}\">加入購物車</a>\n    <h3>${ item.title }</h3>\n    <del class=\"originPrice\">${ dollarSign(item.origin_price) }</del>\n    <p class=\"nowPrice\">${ dollarSign(item.price) }</p>\n  </li>`\n  })\n  productWrap.innerHTML = str;\n}\n\n// 購物車清單\nfunction getCartList() {\n  axios.get(`${web}/api/livejs/v1/customer/${api_path}/carts`)\n  .then(function(res) {\n    cartList = res.data.carts;\n    console.log('購物車清單',cartList);\n    cartListRender();\n    totalPrice.textContent = dollarSign(res.data.finalTotal);\n    delCartListData();\n  })\n  .catch(function() {\n    console.log('讀取失敗，請稍後再試');\n  })\n}\n\n// 購物車清單 render\nfunction cartListRender() {\n  let str = '';\n  cartList.forEach(function(item) {\n    str += `\n    <tr class=\"js-cartListWrap\">\n      <td>\n        <div class=\"cardItem-title\">\n          <img src=\"${ item.product.images }\" alt=\"\" />\n          <p>${ item.product.title }</p>\n        </div>\n      </td>\n      <td>${ dollarSign(item.product.price) }</td>\n      <td>${ item.quantity }</td>\n      <td>${ dollarSign(item.product.price * item.quantity)}</td>\n      <td class=\"discardBtn\">\n        <a href=\"#\" class=\"material-icons js-btnDelete\" data-id=\"${item.id}\"> clear </a>\n      </td>\n    </tr>`\n  })\n  const insertAfter = (el, htmlString) => el.insertAdjacentHTML('afterend', htmlString);\n  insertAfter(cartListWrap, str); \n}\n\n// 加入購物車\nfunction addToCart() {\n  let cartData = {\n    \"data\": {\n      \"productId\": productId,\n      \"quantity\": 1\n    }\n  };\n  axios.post(`${web}/api/livejs/v1/customer/${api_path}/carts`, cartData)\n    .then(function(res) {\n      console.log(res,'加入購物車');\n      getCartList();\n    })\n}\n\n// 刪除單筆購物車訂單\nfunction delCartListData() {\n  const btnDelete = document.querySelectorAll('.js-btnDelete');\n  btnDelete.forEach(function(item) {\n    item.addEventListener('click', function(e){\n      e.preventDefault();\n      cartId = e.target.getAttribute(\"data-id\");\n      console.log(cartId);\n      axios.delete( `${web}/api/livejs/v1/customer/{api_path}/carts/${cartId}`)\n      .then(function(res) {\n        console.log(res);\n      })\n    })\n  })\n}\n\n// add dollar sign\nfunction dollarSign(money) {\n  return `NT$${ money }`\n}\n\ngetProductList();\ngetCartList();"]}